%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
 \ifdefined\DeclareUnicodeCharacterAsOptional
  \DeclareUnicodeCharacter{"00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{"2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{"2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{"2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{"251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{"2572}{\textbackslash}
 \else
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{2572}{\textbackslash}
 \fi
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage[dontkeepoldnames]{sphinx}

\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Table}}
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{1}



\title{National Biogeographic Map Documentation}
\date{Aug 11, 2018}
\release{2.0.1}
\author{Sky Bristol}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex

\begin{document}

\maketitle
\sphinxtableofcontents
\phantomsection\label{\detokenize{index::doc}}



\chapter{History of the National Biogeographic Map}
\label{\detokenize{history:usgs-national-biogeographic-map}}\label{\detokenize{history::doc}}\label{\detokenize{history:history-of-the-national-biogeographic-map}}

\chapter{Biogeographic Information System}
\label{\detokenize{bis:bis}}\label{\detokenize{bis::doc}}\label{\detokenize{bis:biogeographic-information-system}}
The Biogeographic Information System (BIS) is the underlying cyberinfrastructure we are building behind the National Biogeographic Map. It is a set of software codes and information components being contributed to the broader Modular Science Framework vision of the USGS \phantomsection\label{\detokenize{bis:id1}}{\hyperref[\detokenize{references:csssciencestrategy}]{\sphinxcrossref{{[}CSSScienceStrategy{]}}}}. We are also borrowing heavily from ideas pioneered with the Global Change Information System (\sphinxhref{http://data.globalchange.gov}{GCIS}) in terms of a foundational information system that is semantically as well as syntactically intelligent and takes the idea of full traceability seriously.

A brief description of the components that we will reference throughout this documentation is provided below, and we’ll be getting around to better documenting these subsystems in future.


\section{Registries}
\label{\detokenize{bis:registries}}
Much of the information we need to make sense of and work with in the BIS comes from other established sources that we reach out and assimilate in a way that makes sense for what we’re trying to accomplish. We call these “registries” because they essentially start with a process of registering a set of source material in a way we can write code against to build out what we need. Registrants often start with a file or some pointer to an online data service. They are often heterogeneous and may not have very complete metadata directly on board. In all cases so far, we are using \sphinxhref{https://www.sciencebase.gov}{ScienceBase} as our initial point of registration, taking advantage of a few key capabilities:
\begin{itemize}
\item {} 
Flexible information model that lets us define what we want to record about a registrant in a fairly simple way

\item {} 
Ability to provide flexibly described links to online sources for a registrant’s content

\item {} 
Ability to store one or more files in an accessible repository as a cache of a registrant’s content when we need to do so

\item {} 
Reasonably robust API for us to write code against to process registrant content into what we need

\end{itemize}


\subsection{Spatial Feature Registry}
\label{\detokenize{bis:spatial-feature-registry}}
Much of our work involves spatial analysis that runs analytics for a set of areas of interest, allowing us to report on the status of biodiversity and various stressors in a variety of ways. Some of the things we register and process are spatial frameworks based on hydrography or ecology and others are more human-centered like political boundaries of different types. While there are lots of reasonable sources for this kind of information, no one of them serves all our needs, and so we built a registry function to identify the best sources that make sense for our work and run code to pull them all together into something cohesive. Right now, our focus is on assembling certain areas of interest into a common index, complete with full geometry where we have it, that can serve as a place name lookup capability. This will then be used to either send geometry off to spatial processors for live analytics or send identifiers of one kind of another to other services to return pre-calculated metrics. These will drive BAPs in our next iteration of the National Biogeographic Map.

ScienceBase Collection: \sphinxurl{https://www.sciencebase.gov/catalog/item/55fafaf5e4b05d6c4e501b81}

Note: The ScienceBase SFR collection currently has a bunch of cruft and experimental stuff in it, so bear with us while we do some housekeeping.


\subsection{Taxa Information Registry}
\label{\detokenize{bis:taxa-information-registry}}
We also do a bunch of our work with information about species (and other levels of the taxonomic tree). We needed a place where we could assemble relevant information needed in our work that helps to make sense across a bunch of disparate sources. This information includes stuff from taxonomic authorities about taxonomy, but also includes species trait information, regulatory context, judgment calls from different groups about conservation status, and other details that are never all in one place. We also need a way to keep versions of information from these different sources over time as we build decision analysis capabilities so that stakeholders who use our information can count on us to get back to previous results we’ve presented.

As we’ve worked through this and other registry concepts, we’ve come to determine that the TIR is more about a process that produces purpose-built data for use (and keeps track of what it does over time) rather than a giant database. Each species list of interest comes from a particular context, and the rules in that context to things like what taxonomic authorities to consult or how to create meaningful linkages to potential connected information will vary from another context. The first real exposure of the resulting data in the TIR concept will be through our BIS API, though you can see one end result in the web app for the \sphinxhref{https://www1.usgs.gov/csas/swap/}{State Species of Greatest Conservation Need}.


\section{Libraries}
\label{\detokenize{bis:libraries}}
Coming soon…


\subsection{Data Reference Library}
\label{\detokenize{bis:data-reference-library}}

\subsection{Research Reference Library}
\label{\detokenize{bis:research-reference-library}}

\subsection{Software Reference Library}
\label{\detokenize{bis:software-reference-library}}

\chapter{Biogeographic Analysis Packages}
\label{\detokenize{baps:biogeographic-analysis-packages}}\label{\detokenize{baps:baps}}\label{\detokenize{baps::doc}}

\section{Overview}
\label{\detokenize{baps:overview}}
Biogeographic Analysis Packages are the heart and soul of the National Biogeographic Map. Fundamentally, we are building a scientifically robust decision analysis platform focused through the lens of a national map. At the root of this are discrete analytical workflows that leverage a variety of data sources to examine particular issues of importance to resource management and policy making challenges.  We call these foundational units “packages” to denote a method for putting the process and results of our analyses into a cohesive construct that can be explained, reviewed, deployed into a variety of venues (including but not limited to the National Biogeographic Map), and built upon by us and others. We will continue to evolve the BAP concept and will keep this documentation up to date with the latest developments and method descriptions.


\section{Version Control}
\label{\detokenize{baps:version-control}}
Using the Git platform affords the ability to develop Analysis Packages iteratively and openly with our colleagues internal and external. It helps us keep track of the entire analytical workflow, including various dead ends and failed experiments that we conduct in the process such that we and others can learn over time. Using platforms like GitHub and GitLab gives us other capabilities as part of the packages such as issue tracking and associated threaded conversations about the analysis. This allows for a heterogenous mix of scientific programming tools and methods while giving a platform for everyone to contribute in some way to the process.


\section{Open vs. Closed Source}
\label{\detokenize{baps:open-vs-closed-source}}
In general, we default to completely open development of our analyses. The one exception to completely open development (until a publication milestone) is when we are building something with pre-publication sensitivity, meaning that the substance of the analysis is new, publishable scientific information that we will be submitting through internal USGS review controls and often to a particular journal. We do things in the open wherever possible, because we desire and solicit outside feedback, input, and contributions. We want people to poke into what we are doing and how we are analyzing data to help us make better products. By design, we are also always targeting an application to resource management, conservation planning, policy making, and other direct partner uses of our analyses. Conducting our analyses iteratively in the open reduces the barriers for our management partners to co-develop the science with us.

When we can develop in the open, we build our analyses as discrete repositories a particular Organization in GitHub (\textless{}\sphinxurl{https://github.com/usgs-bis}\textgreater{}) to organize things into one logical space and give team members access. When we have to conduct our analyses internally until initial release, we use either private repos in GitHub or one of our internal GitLab instances. Once we are able to release in the open, we move the internal repos to the usgs-bis org.


\section{Iterative Development and Milestones}
\label{\detokenize{baps:iterative-development-and-milestones}}
We are still working out our process for how we conduct the analytical process. We are borrowing some concepts from software engineering and other disciplines and figuring out the best way to apply them to the scientific process within the particular cultural context of our mix of government and university labs. We are working to leverage the capabilities of our chosen platforms where an Analysis Package is made up of the following basic components:
\begin{itemize}
\item {} 
Collection of files

\item {} 
Software code in a variety of languages (mostly Python and R at the moment)

\item {} 
Issues with labels (more on this below)

\item {} 
Repository metadata that dynamically drives much of how BAPs function

\end{itemize}


\subsection{Organization and Navigation}
\label{\detokenize{baps:organization-and-navigation}}
For now, we are usgs-bis GitHub organization with repos flagged to the topic, “\sphinxhref{https://github.com/search?q=topic\%3Aanalysis-package+org\%3Ausgs-bis\&type=Repositories}{analysis-package}”, as the way in which Analysis Packages make their official online debut. We are using the GitHub API to pull information on the repos in this category to evaluate capability maturity of the packages and drive different types of representations (e.g., through the National Biogeographic Map).


\subsection{Issues and Labels}
\label{\detokenize{baps:issues-and-labels}}
Within the GitHub context, we are experimenting with use of issues labeled a particular way to describe milestones and directions of our analyses. While most of the work in an analyses is going to be evidenced through some type of code and associated “formal” documentation, we are also working to foster a form of capturing the broader conversation about an analysis as part of the package. Labels on these conversations will help us to examine where an analysis is in its lifecycle based on our evolving thinking about the process. This will likely be adjusted significantly over time as we continue to work through specific cases.

The purpose of the labels is to flag issues about a particular aspect of the analysis. Issues may come about through one of the following “events”:
\begin{itemize}
\item {} 
The author(s) of the analysis package raise the issues themselves as a reference point for discussion

\item {} 
Someone else from the team may raise an issue during a solicited or extemporaneous review

\item {} 
As we get more sophisticated, we may write algorithms that are able to introspect an analysis package, look for particular characteristics, and then raise issues for discussion and resolution.

\end{itemize}

Eventually, we hope to get more sophisticated in how we use this process and iteratively develop our analyses. In the near term we will be looking for a couple of things (either as team members or in our software codes) with regard to issues and labels.
\begin{itemize}
\item {} 
The complete lack of any issues with the labels in our list means that the topic has not even been raised, indicating a lower level of capability maturity.

\item {} 
Issues raised with the labels but unresolved mean that the issue has at least come up but not yet been brought to a satisfactory conclusion.

\item {} 
Issues with no discussion or involvement (comment postings) from other team members or collaborators means that the particular aspect of the analysis has not yet been through some level of review and discussion.

\item {} 
Issues with the labels that are closed after including some external discussion indicate a more mature concept is likely developing.

\end{itemize}


\subsubsection{Purpose}
\label{\detokenize{baps:purpose}}
The most basic element of an analysis is an ability to clearly state a purpose. This could be phrased as a scientific hypothesis being pursued or could focus more on an application of the particular type of analysis.


\subsubsection{Abstract Stakeholder}
\label{\detokenize{baps:abstract-stakeholder}}
This this stage in the development of our practices, most if not all the analyses we are conducting have a direct application to a stakeholder of some kind in terms of decisionmaking processes. Some of our efforts will stop at the level of an abstract stakeholder or persona that we think the work is targeted toward, while other efforts will get all the way to tests with actual representatives of a stakeholder group Actual Stakeholder.


\subsubsection{Actual Stakeholder}
\label{\detokenize{baps:actual-stakeholder}}
When possible, we are trying to take many of our efforts all the way to sitting down with real people representing a stakeholder community and testing the efficacy of our ideas and presentation with them, soliciting critical feedback, and incorporating that into future iterations. Whenever we can and it makes sense, this involves some level of science co-development where we work together with a partner on all aspects of the analytical workflow. It’s not always possible or necessary to explicitly identify actual stakeholders and may not be appropriate, but when it can be done and makes sense, it would be good to see those folks online with us contributing tangibly to the work.


\subsubsection{Test}
\label{\detokenize{baps:test}}
We are working to combine the foundational scientific method with Test Driven Development from agile software engineering where early in our analytical workflow, we design a logical test that will pass if an analysis proves out. The logical test is designed to prove the purpose and deliver capability to the stakeholder. Eventually, we should get sophisticated enough in our thinking that we can conduct at least a portion of the testing process through software code and collect evidence over time through reported metrics on usage of the analysis in decisionmaking pathways. For now, we will look to issues with this label evidencing discussion on the tests being planned and conducted.


\subsubsection{Inputs}
\label{\detokenize{baps:inputs}}
While there are a number of additional labels (elements of Analysis Packages) that we will likely get into over time, we are starting with the inputs to the analysis as one key aspect that needs immediate attention. Inputs in this sense come down to the data sources, algorithms, theories, article citations, and other necessary ingredients for an analysis to be conducted. We focus on these at this stage in our development, because the inputs will be a major source of scrutiny in identifying new elements that need to be incorporated into the {\hyperref[\detokenize{bis:bis}]{\sphinxcrossref{\DUrole{std,std-ref}{Biogeographic Information System}}}}. Eventually, we will provide a small range of options for how a package identifies its inputs in a way that can be clearly examined by humans and algorithms, but in the near term we will allow for lots of heterogeneity and will use the “Inputs” issue label as a way to identify discussion.


\chapter{Development Methods}
\label{\detokenize{devmethods:development-methods}}\label{\detokenize{devmethods:devmethods}}\label{\detokenize{devmethods::doc}}
Coming soon…


\chapter{References Cited}
\label{\detokenize{references:references-cited}}\label{\detokenize{references::doc}}

\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}


\chapter{Overview}
\label{\detokenize{index:overview}}
The National Biogeographic Map is a project from the U.S. Geological Survey Core Science Systems Mission Area. Our goal is to provide a platform for analysis of questions about what species are where, how well protected they are, how vulnerable they are to stressors, and what management options will have the greatest benefit for conservation of biodiversity. The documentation here covers a range of topics from technical matters on data and software code to case studies on scientific analyses supported by the platform.


\chapter{Contributing}
\label{\detokenize{index:contributing}}
This documentation is a constant work in progress. We are trying to make documentation of all the various concepts we are pursuing and the platform we are developing a baked in part of doing this work, so you should see new stuff show up here regularly. We’ll work over time on better ways to highlight new and changed documentation. If you are partnering with us on this work, we encourage active participation in documentation. Please visit the \sphinxhref{https://github.com/usgs-bis/nbmdocs}{GitHub repo}, clone if you’re already a member of our group or fork it if not, contribute via standard Sphinx methods and reStructuredText, pull request, and ask for review by someone on the team. Anyone who’s already a member of \sphinxhref{https://github.com/usgs-bis}{usgs-bis} can merge the pull request. We’ll add more folks over time who prove themselves with contributions.

\begin{DUlineblock}{0em}
\item[] Note: For the professional software engineers out there, we apologize in advance for fumbling about at times learning to do this stuff properly. We’re mostly a bunch of pointy-headed scientists who are trying to learn just enough of proper software craftsmanship.
\end{DUlineblock}


\chapter{Online Availability}
\label{\detokenize{index:online-availability}}
The content from this Sphinx-based doc package are auto deployed from the master branch to \textless{}\sphinxurl{http://nbmdocs.readthedocs.io/}\textgreater{}. Bear with us as we improve design and process for this and figure out where all we want this stuff to appear. We’ll also be experimenting with GitHub Pages and with our own deploy process into our primary outlet for the \sphinxhref{https://maps.usgs.gov/biogeography}{National Biogeographic Map}.

\begin{sphinxthebibliography}{CSSScienceStrategy}
\bibitem[CSSScienceStrategy]{\detokenize{CSSScienceStrategy}}{\phantomsection\label{\detokenize{references:csssciencestrategy}} 
Bristol, R.S., Euliss, N.H., Jr., Booth, N.L., Burkardt, Nina, Diffendorfer, J.E., Gesch, D.B., McCallum, B.E., Miller, D.M., Morman, S.A., Poore, B.S., Signell, R.P., and Viger, R.J., 2013, U.S. Geological Survey core science systems strategy—Characterizing, synthesizing, and understanding the critical zone through a modular science framework: U.S. Geological Survey Circular 1383\textendash{}B, 33 p. {[}\sphinxurl{https://pubs.usgs.gov/circ/1383b/}{]}
}
\end{sphinxthebibliography}



\renewcommand{\indexname}{Index}
\printindex
\end{document}